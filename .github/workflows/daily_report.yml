name: Daily Stock Analysis Report

on:
  schedule:
    # å°åŒ—æ™‚é–“é€±ä¸€è‡³é€±äº” 13:30 åŸ·è¡Œ (UTC 05:30)
    - cron: '30 5 * * 1-5'
  workflow_dispatch: 

jobs:
  run-analysis:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ æª¢å‡ºç¨‹å¼ç¢¼
        uses: actions/checkout@v3

      - name: ğŸ è¨­å®š Python ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ”¤ å®‰è£ä¸­æ–‡å­—é«”èˆ‡ç’°å¢ƒç›¸ä¾å¥—ä»¶
        run: |
          # å®‰è£é–‹æºä¸­æ–‡å­—é«”ä»¥æ”¯æ´ç¹ªåœ–é¡¯ç¤º
          sudo apt-get update
          sudo apt-get install -y fonts-noto-cjk
          
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: ğŸ“Š åŸ·è¡Œç›£æ§åˆ†æç¨‹å¼
        env:
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py
